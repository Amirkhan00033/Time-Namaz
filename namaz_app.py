# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –Ω—É–∂–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
import requests  # –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —Å–∞–π—Ç Aladhan
from datetime import datetime  # –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞—Ç–æ–π –∏ –≤—Ä–µ–º–µ–Ω–µ–º (–ø–æ–∫–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
import tkinter as tk  # –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è GUI (–æ–∫–Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
from tkinter import messagebox  # –¥–ª—è –≤—ã–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–µ

# üïå –§—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–ª—É—á–∞–µ—Ç –≤—Ä–µ–º—è –Ω–∞–º–∞–∑–∞ —Å —Å–∞–π—Ç–∞ Aladhan
def get_namaz_times():
    city = "Almaty"         # –ì–æ—Ä–æ–¥
    country = "Kazakhstan"  # –°—Ç—Ä–∞–Ω–∞
    method = 99             # –ö–∞—Å—Ç–æ–º–Ω—ã–π –º–µ—Ç–æ–¥ (—á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Ä–µ–º–µ–Ω–∏)
    school = 1              # –•–∞–Ω–∞—Ñ–∏—Ç—Å–∫–∞—è —à–∫–æ–ª–∞ —Ñ–∏–∫—Ö–∞
    tune = "0,-3,3,77,3,3,1,0,0,0,0"  # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ (–≤ –º–∏–Ω—É—Ç–∞—Ö) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–∞–º–∞–∑–∞

    # –°—Å—ã–ª–∫–∞ –Ω–∞ API —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
    url = f"https://api.aladhan.com/v1/timingsByCity?city={city}&country={country}&method={method}&school={school}&tune={tune}"
    
    try:
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º GET-–∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–∞–π—Ç
        response = requests.get(url)

        # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –æ—Ç–≤–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç JSON (—Å–ª–æ–≤–∞—Ä—å Python)
        data = response.json()

        # –ü–æ–ª—É—á–∞–µ–º –Ω—É–∂–Ω–æ–µ –ø–æ–ª–µ "timings", –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤—Ä–µ–º–µ–Ω–∞ –Ω–∞–º–∞–∑–∞
        timings = data["data"]["timings"]

        # –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –Ω–∞–º–∞–∑-–≤—Ä–µ–º–µ–Ω–∞ (Fajr, Sunrise, –∏ —Ç.–¥.)
        return {
            "Fajr": timings["Fajr"],
            "Sunrise": timings["Sunrise"],
            "Dhuhr": timings["Dhuhr"],
            "Asr": timings["Asr"],
            "Maghrib": timings["Maghrib"],
            "Isha": timings["Isha"]
        }
    except Exception as e:
        # –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∞ –æ—à–∏–±–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞) ‚Äî –≤—ã–≤–µ—Å—Ç–∏ –æ—à–∏–±–∫—É –≤ –∫–æ–Ω—Å–æ–ª—å
        print("–û—à–∏–±–∫–∞:", e)
        return None  # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ, —á—Ç–æ–±—ã –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫—É –≤ GUI

# üì± –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞–º–∞–∑–∞ –Ω–∞ —ç–∫—Ä–∞–Ω–µ
def show_namaz_times():
    timings = get_namaz_times()  # –ü–æ–ª—É—á–∞–µ–º –≤—Ä–µ–º–µ–Ω–∞ –Ω–∞–º–∞–∑–∞
    if timings:
        # –§–æ—Ä–º–∏—Ä—É–µ–º –∫—Ä–∞—Å–∏–≤—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
        result = "\n".join([f"{key}: {value}" for key, value in timings.items()])
        # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—Å—Ç –≤ –ª–µ–π–±–ª
        label.config(text=f"üïå –í—Ä–µ–º—è –Ω–∞–º–∞–∑–∞ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è:\n\n{result}")
    else:
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–∫–Ω–æ —Å –æ—à–∏–±–∫–æ–π, –µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
        messagebox.showerror("–û—à–∏–±–∫–∞", "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞–º–∞–∑–∞.")

# üñºÔ∏è –°–æ–∑–¥–∞—ë–º –æ—Å–Ω–æ–≤–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
root = tk.Tk()
root.title("–í—Ä–µ–º—è –ù–∞–º–∞–∑–∞ ‚Äî Almaty")  # –ó–∞–≥–æ–ª–æ–≤–æ–∫ –æ–∫–Ω–∞
root.geometry("300x300")             # –†–∞–∑–º–µ—Ä –æ–∫–Ω–∞
root.resizable(False, False)         # –ó–∞–ø—Ä–µ—â–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞

# üìã –ù–∞–¥–ø–∏—Å—å, –∫—É–¥–∞ –±—É–¥–µ–º –≤—ã–≤–æ–¥–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞–º–∞–∑–∞
label = tk.Label(
    root,
    text="–ó–∞–≥—Ä—É–∑–∫–∞...",              # –¢–µ–∫—Å—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
    font=("Helvetica", 12),          # –®—Ä–∏—Ñ—Ç
    justify="left",                  # –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –ø–æ –ª–µ–≤–æ–º—É –∫—Ä–∞—é
    padx=10, pady=10                 # –û—Ç—Å—Ç—É–ø—ã
)
label.pack()  # –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –ª–µ–π–±–ª

# üîÅ –ö–Ω–æ–ø–∫–∞ "–û–±–Ω–æ–≤–∏—Ç—å", —á—Ç–æ–±—ã –≤—Ä—É—á–Ω—É—é –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –≤—Ä–µ–º—è
button = tk.Button(
    root,
    text="–û–±–Ω–æ–≤–∏—Ç—å",                 # –ù–∞–¥–ø–∏—Å—å –Ω–∞ –∫–Ω–æ–ø–∫–µ
    command=show_namaz_times,        # –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏
    font=("Helvetica", 10)
)
button.pack(pady=10)  # –û—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É

# üì• –ó–∞–≥—Ä—É–∂–∞–µ–º –≤—Ä–µ–º—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
show_namaz_times()

# üîÅ –ó–∞–ø—É—Å–∫–∞–µ–º –≥–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–≤–µ—á–Ω—ã–π —Ü–∏–∫–ª)
root.mainloop()
